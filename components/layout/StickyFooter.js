import Link from "next/link";
import { useRouter } from "next/router";
import { motion } from "framer-motion";
import { usePageTransition } from "@/hooks/usePageTransition";

export default function StickFooter({}) {
  const router = useRouter();
  const { navigateWithTransition, isTransitioning } = usePageTransition();

  const handleNavigation = (e, path) => {
    e.preventDefault();
    if (isTransitioning) return;
    
    // Determine transition direction based on current path
    let direction = 'left';
    const currentPath = router.pathname;
    
    // Define navigation patterns for smooth transitions
    const navigationMap = {
      '/': { '/chats/bidding': 'right', '/personal-leads': 'right', '/chats/packages': 'right', '/settings': 'right' },
      '/chats/bidding': { '/': 'left', '/personal-leads': 'right', '/chats/packages': 'right', '/settings': 'right' },
      '/personal-leads': { '/': 'left', '/chats/bidding': 'left', '/chats/packages': 'right', '/settings': 'right' },
      '/chats/packages': { '/': 'left', '/chats/bidding': 'left', '/personal-leads': 'left', '/settings': 'right' },
      '/settings': { '/': 'left', '/chats/bidding': 'left', '/personal-leads': 'left', '/chats/packages': 'left' }
    };
    
    direction = navigationMap[currentPath]?.[path] || 'left';
    navigateWithTransition(path, direction);
  };

  const navItems = [
    { href: "/", icon: "svg", label: "Dashboard", svgContent: router.pathname === "/" ? (
      <path d="M21.1795 8.12035C21.1795 9.1517 21.5403 9.95535 22.262 10.5313C22.9705 11.1073 24.2236 11.7033 26.0212 12.3195C27.8188 12.9356 29.2884 13.5317 30.43 14.1076C34.1433 15.9694 36 18.5278 36 21.7826C36 23.4033 35.5407 24.8298 34.6222 26.0621C33.6906 27.3077 32.3785 28.2721 30.6859 28.9552C28.9932 29.6517 27.0906 30 24.9781 30C22.918 30 21.0745 29.625 19.4475 28.8749C18.6481 28.5093 17.936 28.0674 17.3112 27.5491C16.892 27.8475 16.4407 28.1153 15.9572 28.3525C14.2646 29.1829 12.2636 29.5981 9.95425 29.5981C7.16596 29.5981 5.0313 28.8531 3.02375 27.0046C1.01618 25.1562 -0.522684 22.062 0.167489 18.5105C0.857658 14.959 4.6928 11.4778 7.15578 11.2232C9.61871 10.9686 11.1485 11.7607 11.1485 11.7607C11.1485 11.7607 9.03935 8.82277 6.40985 9.566C1.62342 10.9189 1.27597 18.2572 5.00332 21.8758C6.8178 23.6374 7.73426 24.1734 9.95425 24.1734C11.3844 24.1734 12.467 23.7716 13.2017 22.9679C13.9365 22.1642 14.3039 20.8583 14.3039 19.05V14.2211C15.4471 15.628 17.0133 16.8049 18.9133 17.7578C19.5911 18.0997 20.3588 18.4407 21.2123 18.7817V19.0902C21.2123 19.7243 21.1454 20.3544 21.1454 20.9352C21.1454 22.1273 21.5206 23.0349 22.2423 23.6913C22.9508 24.3476 23.9152 24.6758 25.1355 24.6758C26.3689 24.6758 27.3465 24.3944 28.0681 23.8319C28.7767 23.2827 29.131 22.5795 29.131 21.7223C29.131 20.9722 28.7373 20.2891 27.95 19.673C27.1628 19.0702 25.7785 18.4407 23.7971 17.7843C21.8158 17.1414 20.1888 16.4449 18.916 15.6948C15.8194 13.8732 14.2711 11.3618 14.2711 8.16051C14.2711 5.60222 15.6523 3.28161 17.5418 1.82163C23.7971 -2.27704 33.1819 1.82163 33.1819 1.82163C33.1819 1.82163 25.0657 2.86105 22.262 5.79105C21.6402 6.44087 21.1795 7.20952 21.1795 8.12035Z" fill="#840032"/>
    ) : (
      <path d="M21.1795 8.12035C21.1795 9.1517 21.5403 9.95535 22.262 10.5313C22.9705 11.1073 24.2236 11.7033 26.0212 12.3195C27.8188 12.9356 29.2884 13.5317 30.43 14.1076C34.1433 15.9694 36 18.5278 36 21.7826C36 23.4033 35.5407 24.8298 34.6222 26.0621C33.6906 27.3077 32.3785 28.2721 30.6859 28.9552C28.9932 29.6517 27.0906 30 24.9781 30C22.918 30 21.0745 29.625 19.4475 28.8749C18.6481 28.5093 17.936 28.0674 17.3112 27.5491C16.892 27.8475 16.4407 28.1153 15.9572 28.3525C14.2646 29.1829 12.2636 29.5981 9.95425 29.5981C7.16596 29.5981 5.0313 28.8531 3.02375 27.0046C1.01618 25.1562 -0.522684 22.062 0.167489 18.5105C0.857658 14.959 4.6928 11.4778 7.15578 11.2232C9.61871 10.9686 11.1485 11.7607 11.1485 11.7607C11.1485 11.7607 9.03935 8.82277 6.40985 9.566C1.62342 10.9189 1.27597 18.2572 5.00332 21.8758C6.8178 23.6374 7.73426 24.1734 9.95425 24.1734C11.3844 24.1734 12.467 23.7716 13.2017 22.9679C13.9365 22.1642 14.3039 20.8583 14.3039 19.05V14.2211C15.4471 15.628 17.0133 16.8049 18.9133 17.7578C19.5911 18.0997 20.3588 18.4407 21.2123 18.7817V19.0902C21.2123 19.7243 21.1454 20.3544 21.1454 20.9352C21.1454 22.1273 21.5206 23.0349 22.2423 23.6913C22.9508 24.3476 23.9152 24.6758 25.1355 24.6758C26.3689 24.6758 27.3465 24.3944 28.0681 23.8319C28.7767 23.2827 29.131 22.5795 29.131 21.7223C29.131 20.9722 28.7373 20.2891 27.95 19.673C27.1628 19.0702 25.7785 18.4407 23.7971 17.7843C21.8158 17.1414 20.1888 16.4449 18.916 15.6948C15.8194 13.8732 14.2711 11.3618 14.2711 8.16051C14.2711 5.60222 15.6523 3.28161 17.5418 1.82163C23.7971 -2.27704 33.1819 1.82163 33.1819 1.82163C33.1819 1.82163 25.0657 2.86105 22.262 5.79105C21.6402 6.44087 21.1795 7.20952 21.1795 8.12035Z" fill="none" stroke="#840032" strokeWidth="2"/>
    ), className: "w-6 h-8 mt-1" },
    { href: "/chats/bidding", icon: "svg", label: "Bids", svgContent: router.pathname === "/chats/bidding" ? (
      <path d="M1.8877 0.5H10.3828C11.1807 0.5 11.9721 0.665991 12.7109 0.990234C13.4498 1.31451 14.1229 1.79127 14.6914 2.39355C15.2599 2.99584 15.7123 3.71234 16.0215 4.50293C16.292 5.19478 16.4477 5.93115 16.4824 6.67871L16.4902 7C16.4879 7.86951 16.3217 8.72928 16.002 9.52832C15.6821 10.3275 15.2154 11.0491 14.6309 11.6514L14.291 12.001L14.6318 12.3496C15.508 13.2464 16.1137 14.404 16.3672 15.6748C16.6207 16.9459 16.5092 18.2687 16.0479 19.4707C15.5865 20.6723 14.7977 21.6958 13.7881 22.4121C12.7789 23.1281 11.5933 23.5056 10.3848 23.5H1.8877C1.52946 23.5 1.17971 23.3494 0.916992 23.0713C0.653295 22.7919 0.500015 22.4068 0.5 22V2C0.5 1.59316 0.653282 1.20809 0.916992 0.928711C1.17971 0.650579 1.52945 0.500031 1.8877 0.5ZM3.27539 20.5H10.3828C11.276 20.5 12.1267 20.124 12.749 19.4648C13.3704 18.8066 13.7148 17.9192 13.7148 17C13.7148 16.0808 13.3704 15.1935 12.749 14.5352C12.1267 13.8759 11.276 13.5 10.3828 13.5H3.27539V20.5ZM3.27539 10.5H10.3828C11.276 10.5 12.1267 10.1241 12.749 9.46484C13.3704 8.80655 13.7148 7.91923 13.7148 7C13.7148 6.08076 13.3704 5.19345 12.749 4.53516C12.1267 3.87593 11.276 3.5 10.3828 3.5H3.27539V10.5Z" fill="#2B3F6C"/>
    ) : (
      <path d="M1.8877 0.5H10.3828C11.1807 0.5 11.9721 0.665991 12.7109 0.990234C13.4498 1.31451 14.1229 1.79127 14.6914 2.39355C15.2599 2.99584 15.7123 3.71234 16.0215 4.50293C16.292 5.19478 16.4477 5.93115 16.4824 6.67871L16.4902 7C16.4879 7.86951 16.3217 8.72928 16.002 9.52832C15.6821 10.3275 15.2154 11.0491 14.6309 11.6514L14.291 12.001L14.6318 12.3496C15.508 13.2464 16.1137 14.404 16.3672 15.6748C16.6207 16.9459 16.5092 18.2687 16.0479 19.4707C15.5865 20.6723 14.7977 21.6958 13.7881 22.4121C12.7789 23.1281 11.5933 23.5056 10.3848 23.5H1.8877C1.52946 23.5 1.17971 23.3494 0.916992 23.0713C0.653295 22.7919 0.500015 22.4068 0.5 22V2C0.5 1.59316 0.653282 1.20809 0.916992 0.928711C1.17971 0.650579 1.52945 0.500031 1.8877 0.5ZM3.27539 20.5H10.3828C11.276 20.5 12.1267 20.124 12.749 19.4648C13.3704 18.8066 13.7148 17.9192 13.7148 17C13.7148 16.0808 13.3704 15.1935 12.749 14.5352C12.1267 13.8759 11.276 13.5 10.3828 13.5H3.27539V20.5ZM3.27539 10.5H10.3828C11.276 10.5 12.1267 10.1241 12.749 9.46484C13.3704 8.80655 13.7148 7.91923 13.7148 7C13.7148 6.08076 13.3704 5.19345 12.749 4.53516C12.1267 3.87593 11.276 3.5 10.3828 3.5H3.27539V10.5Z" fill="none" stroke="#2B3F6C" strokeWidth="0.8"/>
    ), className: "w-6 h-8 mt-1" },
    { href: "/personal-leads", icon: "svg", label: "Create", svgContent: router.pathname === "/personal-leads" ? (
      <><circle cx="20" cy="20" r="18" fill="white"/><circle cx="20" cy="20" r="16" fill="#2B3F6C"/><path d="M20 12v16M12 20h16" stroke="white" strokeWidth="3" strokeLinecap="round"/></>
    ) : (
      <><circle cx="20" cy="20" r="18" fill="white"/><circle cx="20" cy="20" r="16" fill="none" stroke="#2B3F6C" strokeWidth="2"/><path d="M20 12v16M12 20h16" stroke="#2B3F6C" strokeWidth="2" strokeLinecap="round"/></>
    ), className: "w-12 h-12", specialClass: "relative -top-6", style: { zIndex: 2147483647, position: 'relative' } },
    { href: "/chats/packages", icon: "svg", label: "Packages", svgContent: router.pathname === "/chats/packages" ? (
      <path d="M0 24V0H9.1C11.1444 0 12.8889 0.331429 14.3333 0.994287C15.7778 1.65714 16.8889 2.61714 17.6667 3.87429C18.4444 5.13143 18.8333 6.62857 18.8333 8.36572C18.8333 10.1029 18.4444 11.6 17.6667 12.8571C16.8889 14.0914 15.7778 15.0514 14.3333 15.7371C12.8889 16.4 11.1444 16.7314 9.1 16.7314L3.33333 16.7314V15.12V24H0ZM3.33333 15.4629V13.7486L9 13.7486C11.1333 13.7486 12.7444 13.28 13.8333 12.3429C14.9444 11.4057 15.5 10.08 15.5 8.36572C15.5 6.65143 14.9444 5.32572 13.8333 4.38857C12.7444 3.45143 11.1333 2.98286 9 2.98286L3.33333 2.98286V15.4629Z" fill="#2B3F6C"/>
    ) : (
      <path d="M9.09961 0.5C11.0919 0.5 12.7619 0.822709 14.125 1.44824C15.487 2.07326 16.5192 2.97063 17.2412 4.1377C17.962 5.30272 18.3329 6.7048 18.333 8.36523C18.333 10.0245 17.9628 11.4263 17.2432 12.5908C16.5219 13.7353 15.4891 14.6334 14.125 15.2822C12.7619 15.9078 11.0919 16.2314 9.09961 16.2314H3.83301V14.249H9C11.1966 14.249 12.9444 13.7671 14.1592 12.7217L14.1582 12.7207C15.4001 11.6714 16 10.1958 16 8.36523C15.9999 6.53462 15.4003 5.05903 14.1582 4.00977H14.1592C12.9444 2.96436 11.1966 2.48242 9 2.48242H3.83301V1.98438H2.83301V23.5H0.5V0.5H9.09961Z" fill="none" stroke="#2B3F6C" strokeWidth="1.5"/>
    ), className: "w-6 h-8 mt-1" },
    { href: "/settings", icon: "svg", label: "Settings", svgContent: (
      <><path d="M12 15a3 3 0 100-6 3 3 0 000 6z" fill="none" stroke="#2B3F6C" strokeWidth="2"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" fill="none" stroke="#2B3F6C" strokeWidth="2"/></>
    ), className: "w-7 h-9 mt-1" }
  ];

  return (
    <>
      <div className="sticky bottom-0 mt-px w-full grid grid-cols-5 gap-2 border-t border-gray-300 p-2 px-4 justify-items-center bg-white shadow-[0_-2px_6px_rgba(0,0,0,0.08)]" style={{ zIndex: 60 }}>
        {navItems.map((item, index) => (
          <motion.div
            key={item.href}
            whileTap={{ scale: 0.95 }}
            whileHover={{ scale: 1.05 }}
            transition={{ duration: 0.1 }}
          >
            <a
              href={item.href}
              onClick={(e) => handleNavigation(e, item.href)}
              className={`flex flex-col items-center ${item.specialClass || ''} ${isTransitioning ? 'pointer-events-none opacity-50' : 'cursor-pointer'}`}
              style={item.style || {}}
            >
              {item.icon === "img" ? (
                <img src={item.iconSrc} className={item.className} />
              ) : (
                <svg className={item.className} viewBox={item.href === "/personal-leads" ? "0 0 40 40" : item.href === "/" ? "0 0 36 30" : item.href === "/chats/bidding" ? "0 0 17 24" : "0 0 24 24"} fill="none">
                  {item.svgContent}
                </svg>
              )}
              <span className="text-xs font-medium mt-1" style={{color: 'black'}}>{item.label}</span>
            </a>
          </motion.div>
        ))}
      </div>
    </>
  );
}